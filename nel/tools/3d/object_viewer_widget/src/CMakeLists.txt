INCLUDE_DIRECTORIES(
		${CMAKE_CURRENT_BINARY_DIR}
		${CMAKE_CURRENT_SOURCE_DIR}
		${NEL_INCLUDE_DIR})

FILE(GLOB OBJECT_VIEWER_WIDGET_SRC *.cpp *.h)
SET(OBJECT_VIEWER_WIDGET_HDR object_viewer_widget.h)

IF(WITH_QT)
  INCLUDE_DIRECTORIES(${QT_INCLUDES})
  INCLUDE(${QT_USE_FILE})

  SET(QT_USE_QTGUI TRUE)
  SET(QT_USE_QTOPENGL TRUE)

  QT4_WRAP_CPP(OBJECT_VIEWER_WIDGET_MOC_SRCS ${OBJECT_VIEWER_WIDGET_HDR})

  ADD_DEFINITIONS(${QT_DEFINITIONS})
  ADD_DEFINITIONS(-DQT_NO_KEYWORDS)
  ADD_DEFINITIONS(-DQT_PLUGIN)
  ADD_DEFINITIONS(-DQT_SHARED)
  #ADD_DEFINITIONS(-DQT_NO_DEBUG)

  SET(QT_LIBRARIES ${QT_LIBRARIES} ${QT_QTOPENGL_LIBRARY})
ELSE()
  QT5_WRAP_CPP(OBJECT_VIEWER_WIDGET_MOC_SRCS ${OBJECT_VIEWER_WIDGET_HDR})
ENDIF()

SOURCE_GROUP(QtGeneratedMocSrc FILES ${OBJECT_VIEWER_WIDGET_MOC_SRCS})

IF(WITH_STATIC)
  SET(TYPE STATIC)
ELSE()
  SET(TYPE MODULE)
ENDIF()

ADD_LIBRARY(object_viewer_widget_qt ${TYPE}
		${OBJECT_VIEWER_WIDGET_SRC}
		${OBJECT_VIEWER_WIDGET_MOC_SRCS})

TARGET_LINK_LIBRARIES(object_viewer_widget_qt
		nelmisc
		nel3d
		${QT_LIBRARIES})

NL_DEFAULT_PROPS(object_viewer_widget_qt "NeL, Tools, 3D: Object Viewer Qt Widget")
NL_ADD_RUNTIME_FLAGS(object_viewer_widget_qt)

IF(WITH_PCH)
  ADD_NATIVE_PRECOMPILED_HEADER(object_viewer_widget_qt ${CMAKE_CURRENT_SOURCE_DIR}/stdpch.h ${CMAKE_CURRENT_SOURCE_DIR}/stdpch.cpp)
ENDIF()

#INSTALL(TARGETS object_viewer_widget_qt RUNTIME DESTINATION ${NL_BIN_PREFIX} COMPONENT runtime)
