FILE(GLOB SRC *.cpp *.h)
FILE(GLOB HEADERS ../../../include/nel/sound/driver/*.h)

NL_TARGET_LIB(nelsnd_lowlevel ${HEADERS} ${SRC})

INCLUDE_DIRECTORIES(${OGG_INCLUDE_DIR} ${VORBIS_INCLUDE_DIR})

TARGET_LINK_LIBRARIES(nelsnd_lowlevel nelmisc ${VORBISFILE_LIBRARY} ${VORBIS_LIBRARY})
IF(WITH_STATIC)
  # Add libogg dependency only if target is static because to libvorbisfile
  TARGET_LINK_LIBRARIES(nelsnd_lowlevel ${OGG_LIBRARY})
ENDIF(WITH_STATIC)


SET_TARGET_PROPERTIES(nelsnd_lowlevel PROPERTIES LINK_INTERFACE_LIBRARIES "")
NL_DEFAULT_PROPS(nelsnd_lowlevel "NeL, Library: Sound Lowlevel")
NL_ADD_RUNTIME_FLAGS(nelsnd_lowlevel)
NL_ADD_STATIC_SND_DRIVERS(nelsnd_lowlevel)

NL_ADD_LIB_SUFFIX(nelsnd_lowlevel)

IF(WITH_PCH)
  ADD_NATIVE_PRECOMPILED_HEADER(nelsnd_lowlevel ${CMAKE_CURRENT_SOURCE_DIR}/stdsound_lowlevel.h ${CMAKE_CURRENT_SOURCE_DIR}/stdsound_lowlevel.cpp)
ENDIF(WITH_PCH)

INSTALL(TARGETS nelsnd_lowlevel LIBRARY DESTINATION lib ARCHIVE DESTINATION lib COMPONENT libraries)

IF(WITH_DRIVER_OPENAL)
  ADD_SUBDIRECTORY(openal)
ENDIF(WITH_DRIVER_OPENAL)

IF(WITH_DRIVER_FMOD)
  ADD_SUBDIRECTORY(fmod)
ENDIF(WITH_DRIVER_FMOD)

IF(WITH_DRIVER_DSOUND)
  ADD_SUBDIRECTORY(dsound)
ENDIF(WITH_DRIVER_DSOUND)

IF(WITH_DRIVER_XAUDIO2)
  ADD_SUBDIRECTORY(xaudio2)
ENDIF(WITH_DRIVER_XAUDIO2)
