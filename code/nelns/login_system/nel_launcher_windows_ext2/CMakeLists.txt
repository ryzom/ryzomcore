FILE(GLOB SRC *.cpp *.h)

DECORATE_NEL_LIB("nel3d")
SET(NL3D_LIB ${LIBNAME})

ADD_EXECUTABLE(nel_launcher_ext2 WIN32 ${SRC} nel_launcher.rc)
IF(CURL_FOUND)
  ADD_DEFINITIONS(-DUSE_CURL)
ENDIF(CURL_FOUND)
ADD_DEFINITIONS(-DNL_LAUNCHER_CFG="\\"${NL_ETC_PREFIX}/\\"")

INCLUDE_DIRECTORIES(${LIBXML2_INCLUDE_DIR} ${NELMISC_INCLUDE_DIRS})
TARGET_LINK_LIBRARIES(nel_launcher_ext2 ${LIBXML2_LIBRARIES} ${PLATFORM_LINKFLAGS} ${NELNET_LIBRARY} ${NELMISC_LIBRARY} ${ZLIB_LIBRARY} ${CURL_LIBRARY})
SET_TARGET_PROPERTIES(nel_launcher_ext2 PROPERTIES 
	LINK_FLAGS "/NODEFAULTLIB:libcmt"
	PROJECT_LABEL "Launcher: NeL Launcher Ext2")
ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})

INSTALL(TARGETS nel_launcher_ext2 RUNTIME DESTINATION bin COMPONENT launcher)
INSTALL(FILES nel_launcher.cfg DESTINATION etc/nel COMPONENT launcher)
