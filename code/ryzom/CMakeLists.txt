#-----------------------------------------------------------------------------
#Platform specifics

IF(WITH_LUA51)
  FIND_PACKAGE(Lua51 REQUIRED)
ELSE(WITH_LUA51)
  FIND_PACKAGE(Lua50 REQUIRED)
ENDIF(WITH_LUA51)
FIND_PACKAGE(CURL REQUIRED)
FIND_PACKAGE(Libwww)
FIND_PACKAGE(ZLIB)
IF(NOT WIN32 AND NOT APPLE)
  FIND_PACKAGE(X11)
ENDIF(NOT WIN32 AND NOT APPLE)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/common/src )
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/common )

# config.h configuration and use by projects
CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/config.h.cmake ${CMAKE_CURRENT_BINARY_DIR}/config.h)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
ADD_DEFINITIONS(-DHAVE_CONFIG_H)

ADD_SUBDIRECTORY(common)

IF(WITH_RYZOM_CLIENT)
  ADD_SUBDIRECTORY(client)
ENDIF(WITH_RYZOM_CLIENT)

IF(WITH_RYZOM_TOOLS)
  ADD_SUBDIRECTORY(tools)
ENDIF(WITH_RYZOM_TOOLS)

IF(WITH_RYZOM_SERVER)
  FIND_PACKAGE(MySQL REQUIRED)
  ADD_SUBDIRECTORY(server)
ENDIF(WITH_RYZOM_SERVER)
