FILE(GLOB SRC *.cpp *.h)

LIST(REMOVE_ITEM SRC	${CMAKE_CURRENT_SOURCE_DIR}/pair_selector.cpp
			${CMAKE_CURRENT_SOURCE_DIR}/pair_selector.h
			${CMAKE_CURRENT_SOURCE_DIR}/prioritizer.cpp
			${CMAKE_CURRENT_SOURCE_DIR}/prioritizer.h
			${CMAKE_CURRENT_SOURCE_DIR}/property_dispatcher.cpp
			${CMAKE_CURRENT_SOURCE_DIR}/property_dispatcher.h)

ADD_EXECUTABLE(frontend_service ${SRC})

INCLUDE_DIRECTORIES(${LIBXML2_INCLUDE_DIR} ${MYSQL_INCLUDE_DIR} ${ZLIB_INCLUDE_DIR} ${NEL_INCLUDE_DIR})
TARGET_LINK_LIBRARIES(frontend_service admin_modules ryzom_gameshare ${PLATFORM_LINKFLAGS} ${LIBXML2_LIBRARIES} ${MYSQL_LIBRARIES} ${ZLIB_LIBRARIES} ${NELMISC_LIBRARY} ${NELNET_LIBRARY} ${NELGEORGES_LIBRARY} ${NELLIGO_LIBRARY})
IF(WIN32)
  SET_TARGET_PROPERTIES(frontend_service PROPERTIES 
	LINK_FLAGS "/NODEFAULTLIB:libcmt /SUBSYSTEM:WINDOWS"
	PROJECT_LABEL "Services: Frontend Service (FS)")
ENDIF(WIN32)

ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})

IF(WITH_PCH)
  ADD_NATIVE_PRECOMPILED_HEADER(frontend_service ${CMAKE_CURRENT_SOURCE_DIR}/stdpch.h ${CMAKE_CURRENT_SOURCE_DIR}/stdpch.cpp)
ENDIF(WITH_PCH)

INSTALL(TARGETS frontend_service RUNTIME DESTINATION sbin COMPONENT services)

